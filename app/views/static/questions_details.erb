<h2> Question details </h2>

<h3><%= @question.content %></h3>

<a href='/questions/<%= @question.id %>/edit'>Edit this question</a>

<form method=post action=/questions/<%= @question.id %>/delete >
	<!-- this line below is Important -->
	<input id="hidden" type="hidden" name="_method" value="delete">
	<input type=submit value="Delete Question">
</form>


<p>Answers:</p>

<% if @question.answers.count > 0%>
	<% @question.answers.each do |a| %>
		<p>
			<p style="white-space: pre-line;"> <%= a.content %> </p>
			<i>posted by <%= a.user.username%> on <%= format_date(a.updated_at) %></i><br>
			Votes: <div id="answer_vote_count<%= a.id %>"><%= a.answer_votes.count %></div>

			<form method=post action=/answer_votes/<%= a.id %>/ajax_up class='answer_upvote'>
				<% if a.answer_votes.where(user_id: current_user.id).count == 0 %>
					<button type=submit id='upvote<%= a.id %>' class='upvote_false'>Upvote</button>
				<% else %>
					<button type=submit id='upvote<%= a.id %>' class='upvote_true'>Upvoted</button>
				<% end %>
			</form>

			<form method=post action=/answer_votes/<%= a.id %>/ajax_down class='answer_downvote'>
					<button type=submit >Downvote</button>
			</form>



		</p>
	<% end %>
<% else %>
	<p> no answers yet..</p>
<% end %>



<h3>Reply to this question</h3>

<form method=post action=/questions/<%= @question.id %>/answers id="answers_form">
<!-- 	<input type=text placeholder="Your answer" name="answer[content]" required><br> -->
	<textarea rows="4" cols="50" name="answer[content]" form="answers_form"></textarea>

	<input type=submit value="Submit Answer">
</form>


<p>
	<a href='/questions'>Back to Questions</a><br>
	<a href='/'>Back to Index</a>
</p>


